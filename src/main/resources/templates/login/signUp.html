<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <th:block th:replace="common/config :: configFragment"></th:block>
    <style>
        .container {
            width: 650px;
        }

        .card-title {
            margin-bottom: 50px;
            text-align: center;
        }

        .card-button {
            text-align: center;
        }

        .form-group {
            margin-bottom: 10px;
        }
    </style>
</head>

<body>

    <script>

        document.addEventListener("DOMContentLoaded", function(){
            // Handler when the DOM is fully loaded
            let btnCheckDuplicate = document.getElementById('btnCheckDuplicate');
            btnCheckDuplicate.addEventListener('click', checkDuplicate);
        });


        function checkDuplicate() {
            let username = document.getElementById('username');
            //console.log(username.value);
            let url = "/signUp/" + username.value;

            let xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                console.log("response value = " + this.responseText);
            };

            xhttp.open("GET", url, true);
            xhttp.send();

        }
    </script>

    <!-- header -->
    <div th:insert="/common/header :: header"></div>

    <section class="container">
        <form class="form-horizontal" th:action="@{/signUp}" method="post">
            <div class="card-body">
                <h4 class="card-title">회원 가입</h4>
                <div class="form-group row">
                    <label for="username" class="col-sm-3 text-right control-label col-form-label">아이디</label>
                    <div class="col-sm-6">
                        <input type="text" class="form-control" id="username" name="username">
                    </div>
                    <div class="col-sm-3">
                        <button type="button" class="btn btn-dark" id="btnCheckDuplicate" name="btnCheckDuplicate">중복체크</button>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="password" class="col-sm-3 text-right control-label col-form-label">비밀번호</label>
                    <div class="col-sm-9">
                        <input type="password" class="form-control" id="password" name="password">
                    </div>
                </div>
                <!-- <div class="form-group row">
                     <label for="nickname" class="col-sm-3 text-right control-label col-form-label">닉네임</label>
                     <div class="col-sm-9">
                         <input type="text" class="form-control" id="nickname" name="nickname">
                     </div>
                 </div>
                 <div class="form-group row">
                     <label for="cono1" class="col-sm-3 text-right control-label col-form-label">Contact No</label>
                     <div class="col-sm-9">
                         <input type="text" class="form-control" id="cono1" >
                     </div>
                 </div>
                 <div class="form-group row">
                     <label for="cono1" class="col-sm-3 text-right control-label col-form-label">Message</label>
                     <div class="col-sm-9">
                         <textarea class="form-control"></textarea>
                     </div>
                 </div> -->
            </div>
            <div>
                <div class="card-button">
                    <button type="submit" class="btn btn-primary"  >회원가입</button>
                    <button type="button" class="btn btn-defaults" onclick="history.back(-1)" >취소</button>
                </div>
            </div>
        </form>
    </section>
    <!-- footer -->
    <th/:block th:replace="common/footer :: footerFragment"></th:block>


</body>

</html>